{% extends 'base.html' %}
{% load static %}
{% load results %}


{% block main %}
<div class="container-wrapper">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <h1 class="text-center">Find an Organization Prefix </h1>
        <br/>
        <h3>What country is the organization registered in?</h3>
        <form>
          <select name="jurisdiction" class="selectpicker" data-live-search="true" data-width="300px">
            <option value="">Any country</option>
            {% for country in lists.jurisdictions %}
            <option {% if query.jurisdiction == country.countryCode %} selected {% endif %}  value="{{country.countryCode}}">{{country.country}}</option>
            {% endfor %}
          </select>
          <h3>What type of organization is it?</h3>
          <select name="organisation_type" class="selectpicker" data-live-search="true" data-width="300px">
            <option value = "">Any type</option>
            {% for org_type in lists.organisation_types %}
              {% if not org_type.subtypeOf and org_type.name %}
                <option {% if query.organisation_type == org_type.name %} selected {% endif %} value="{{org_type.name}}">{{org_type.name}}</option>
              {% endif %}
            {% endfor %}
          </select>
          <h3>What sector is the organization in?</h3>
          <select name="sector" class="selectpicker" data-live-search="true" data-width="300px">
            <option value = "">Any Sector</option>
            {% for sector in lists.sectors %}
               {% if sector.name %}
                 <option {% if query.sector == sector.name %} selected {% endif %} value="{{sector.name}}">{{sector.name}}</option>
               {% endif %}
            {% endfor %}
          </select>
          </br>
          </br>
          <button type="submit" class="btn-primary btn">Find Prefixes</button>
        </form>
          </br>
          {% if query %}

            {% if all_results.suggested %}
              {% with all_results.suggested as results %}
                <h1 id="results" class="text-center">Suggested Results </br></h1>
                </br>
                {% include 'results.html' %}
              {% endwith %}
            {% else %}
              <h1 id="results" class="text-center">No Suggested Results</h1>
            {% endif %}

            {% if all_results.recommended %}
              {% with all_results.recommended as results %}
              <h1 id="results" class="text-center">Recommended Results </br></h1>
              </br>
              {% include 'results.html' %}
              {% endwith %}
            {% else %}
              <h1 id="results" class="text-center">No Recommended Results</h1>
            {% endif %}

            {% if all_results.other %}
              {% with all_results.other as results %}
              <h1 id="results" class="text-center">Other Results </br></h1>
              </br>
              {% include 'results.html' %}
              {% endwith %}
            {% else %}
              <h1 id="results" class="text-center">No Other Results</h1>
            {% endif %}

          {% endif %}

      </div>
    </div>
  </div>
</div>

{% endblock %}


{% block extra_scripts %}

<script>
$(function() {
  $("html, body").animate({ scrollTop: $('#results').offset().top + 100 }, 1000);
})
</script>


{% endblock %}
